{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Route,Switch}from'react-router-dom';import'./App.scss';import MainNav from'./components/MainNav';import Home from'./pages/Home';import Login from'./pages/Login';import Register from'./pages/Register';import Cart from'./pages/Cart';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this));_this.handleLogin=function(user){_this.setState({logged_in:true,user:user});};_this.state={logged_in:false,user:{}};return _this;}_createClass(App,[{key:\"checkLoginStatus\",value:function checkLoginStatus(){var _this2=this;fetch('/api/user/me',{credentials:'include'}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=_this2;_context.t1=res.ok;if(!res.ok){_context.next=8;break;}_context.next=5;return res.json();case 5:_context.t2=_context.sent;_context.next=9;break;case 8:_context.t2={};case 9:_context.t3=_context.t2;_context.t4={'logged_in':_context.t1,user:_context.t3};_context.t0.setState.call(_context.t0,_context.t4);case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){_this2.setState({'logged_in':false,user:{}});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.checkLoginStatus();}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(MainNav,{logged_in:this.state.logged_in,user:this.state.user}),React.createElement(\"div\",{className:\"container main-view\"},React.createElement(Switch,null,React.createElement(Route,{exact:true,path:\"/\",component:Home}),React.createElement(Route,{path:\"/login\",render:function render(props){return React.createElement(Login,Object.assign({},props,{logged_in:_this3.state.logged_in,onLogin:_this3.handleLogin}));}}),React.createElement(Route,{path:\"/register\",render:function render(props){return React.createElement(Register,Object.assign({},props,{onLogin:_this3.handleLogin}));}}),React.createElement(Route,{path:\"/cart\",component:Cart}))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/gabsacs/Desktop/Group1/src/client/src/App.js"],"names":["React","Component","Route","Switch","MainNav","Home","Login","Register","Cart","App","handleLogin","user","setState","logged_in","state","fetch","credentials","then","res","ok","json","catch","err","checkLoginStatus","props"],"mappings":"w2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,kBAA9B,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,C,GAEMC,CAAAA,G,6DACJ,cAAc,qCACZ,uEADY,MA4BdC,WA5Bc,CA4BA,SAACC,IAAD,CAAU,CACtB,MAAKC,QAAL,CAAc,CACZC,SAAS,CAAE,IADC,CAEZF,IAAI,CAAJA,IAFY,CAAd,EAID,CAjCa,CAEZ,MAAKG,KAAL,CAAa,CACXD,SAAS,CAAE,KADA,CAEXF,IAAI,CAAE,EAFK,CAAb,CAFY,aAMb,C,2EAEkB,iBACjBI,KAAK,CAAC,cAAD,CAAiB,CACpBC,WAAW,CAAE,SADO,CAAjB,CAAL,CAEGC,IAFH,0FAEQ,iBAAOC,GAAP,8HACN,MADM,aAESA,GAAG,CAACC,EAFb,KAGED,GAAG,CAACC,EAHN,+CAGiBD,CAAAA,GAAG,CAACE,IAAJ,EAHjB,2EAG8B,EAH9B,6CAEJ,WAFI,aAGJT,IAHI,0BACDC,QADC,sFAFR,gEAOGS,KAPH,CAOS,SAACC,GAAD,CAAS,CAChB,MAAI,CAACV,QAAL,CAAc,CACZ,YAAa,KADD,CAEZD,IAAI,CAAE,EAFM,CAAd,EAID,CAZD,EAaD,C,6DAEmB,CAClB,KAAKY,gBAAL,GACD,C,uCASQ,iBACP,MACE,4BAAK,SAAS,CAAC,iBAAf,EACE,oBAAC,OAAD,EAAS,SAAS,CAAE,KAAKT,KAAL,CAAWD,SAA/B,CAA0C,IAAI,CAAE,KAAKC,KAAL,CAAWH,IAA3D,EADF,CAEE,2BAAK,SAAS,CAAC,qBAAf,EACE,oBAAC,MAAD,MACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEN,IAAjC,EADF,CAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CACI,MAAM,CAAE,gBAACmB,KAAD,QAAW,qBAAC,KAAD,kBAAWA,KAAX,EAAkB,SAAS,CAAE,MAAI,CAACV,KAAL,CAAWD,SAAxC,CAAmD,OAAO,CAAE,MAAI,CAACH,WAAjE,GAAX,EADZ,EAFF,CAKE,oBAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CACI,MAAM,CAAE,gBAACc,KAAD,QAAW,qBAAC,QAAD,kBAAcA,KAAd,EAAqB,OAAO,CAAE,MAAI,CAACd,WAAnC,GAAX,EADZ,EALF,CAQE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEF,IAA/B,EARF,CADF,CAFF,CADF,CAiBD,C,iBAtDeP,S,EAyDlB,cAAeQ,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport './App.scss';\nimport MainNav from './components/MainNav';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Cart from './pages/Cart';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      logged_in: false,\n      user: {},\n    }\n  }\n\n  checkLoginStatus() {\n    fetch('/api/user/me', {\n      credentials: 'include',\n    }).then(async (res) => {\n      this.setState({\n        'logged_in': res.ok,\n        user: res.ok ? await res.json() : {},\n      });\n    }).catch((err) => {\n      this.setState({\n        'logged_in': false,\n        user: {},\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.checkLoginStatus();\n  }\n\n  handleLogin = (user) => {\n    this.setState({\n      logged_in: true,\n      user,\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"container-fluid\">\n        <MainNav logged_in={this.state.logged_in} user={this.state.user}/>\n        <div className=\"container main-view\">\n          <Switch>\n            <Route exact path='/' component={Home} />\n            <Route path='/login'\n                render={(props) => <Login {...props} logged_in={this.state.logged_in} onLogin={this.handleLogin}/>}\n            />\n            <Route path='/register'\n                render={(props) => <Register {...props} onLogin={this.handleLogin}/>}\n            />\n            <Route path='/cart' component={Cart} />\n          </Switch>\n        </div>\n      </div>\n    )\n  };\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}