{"ast":null,"code":"import _defineProperty from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/gabsacs/Desktop/Group1/src/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this));_this.handleSubmit=function(event){event.preventDefault();_this.setState({error_msg:null,errors:{}});if(!_this.passwordsMatch()){return;}return fetch('/api/user/signup',{method:'post',credentials:'include',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:_this.state.username,name:_this.state.name,email:_this.state.email,password:_this.state.password})}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:body=_context.sent;if(res.ok){_context.next=5;break;}return _context.abrupt(\"return\",_this.setState({error_msg:body._message,errors:body.errors}));case 5:_this.setState({logged_in:true});_this.props.onLogin(body);// user\ncase 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){console.error(err);});};_this.state={username:'',name:'',email:'',password:'',confirm_password:'',error_msg:null,errors:{},logged_in:props.logged_in||false};return _this;}_createClass(Login,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.logged_in){this.props.history.push('/');}}},{key:\"onChange\",value:function onChange(attr,event){this.setState(_defineProperty({},attr,event.target.value));}},{key:\"passwordsMatch\",value:function passwordsMatch(){if(!this.state.confirm_password){return true;}return this.state.password===this.state.confirm_password;}},{key:\"render\",value:function render(){var _this2=this;var form=React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"form-row\"},React.createElement(\"div\",{className:\"col-12 mb-2\"},React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Desired Username\",required:true,value:this.state.username,onChange:function onChange(e){return _this2.onChange('username',e);}})),React.createElement(\"div\",{className:\"col-12 mb-2\"},React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Your Name\",required:true,value:this.state.name,onChange:function onChange(e){return _this2.onChange('name',e);}})),React.createElement(\"div\",{className:\"col-12 mb-2\"},React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"email@example.com\",required:true,value:this.state.email,onChange:function onChange(e){return _this2.onChange('email',e);}})),React.createElement(\"div\",{className:\"col-12 mb-2\"},React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",required:true,value:this.state.password,onChange:function onChange(e){return _this2.onChange('password',e);}})),React.createElement(\"div\",{className:\"col-12 mb-2\"},React.createElement(\"input\",{type:\"password\",className:\"form-control \".concat(this.passwordsMatch()?'':'is-invalid'),placeholder:\"Confirm Password\",required:true,value:this.state.confirm_password,onChange:function onChange(e){return _this2.onChange('confirm_password',e);}}),React.createElement(\"span\",{className:\"invalid-feedback\"},!this.passwordsMatch()?'passwords must match':'')),React.createElement(\"div\",{className:\"col-12\"},React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\"},\"Sign Me Up\"))));var errors=Object.keys(this.state.errors).map(function(attr,i){return React.createElement(\"li\",{key:\"\".concat(attr,\"-\").concat(i)},React.createElement(\"strong\",null,attr,\": \"),\" \",_this2.state.errors[attr].message);});var message=React.createElement(\"div\",{className:\"text-danger mt-3\"},this.state.error_msg,React.createElement(\"ul\",{className:\"m-0\"},errors));return React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col\"},React.createElement(\"div\",{className:\"card my-5 mx-auto\",style:{maxWidth:'500px'}},React.createElement(\"div\",{className:\"card-body\"},form,this.state.error_msg?message:null))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){return props;}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/gabsacs/Desktop/Group1/src/client/src/pages/Register.js"],"names":["React","Component","Login","props","handleSubmit","event","preventDefault","setState","error_msg","errors","passwordsMatch","fetch","method","credentials","headers","body","JSON","stringify","username","state","name","email","password","then","res","json","ok","_message","logged_in","onLogin","catch","err","console","error","confirm_password","history","push","attr","target","value","form","e","onChange","Object","keys","map","i","message","maxWidth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nclass Login extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      username: '',\n      name: '',\n      email: '',\n      password: '',\n      confirm_password: '',\n      error_msg: null,\n      errors: {},\n      logged_in: props.logged_in || false,\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    return props;\n  }\n\n  componentDidUpdate() {\n    if (this.state.logged_in) {\n      this.props.history.push('/');\n    }\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    this.setState({\n      error_msg: null,\n      errors: {},\n    });\n\n    if (!this.passwordsMatch()) {\n      return;\n    }\n\n    return fetch('/api/user/signup', {\n      method: 'post',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        username: this.state.username,\n        name: this.state.name,\n        email: this.state.email,\n        password: this.state.password,\n      }),\n    }).then(async (res) => {\n      const body = await res.json();\n      if (!res.ok) {\n        return this.setState({\n          error_msg: body._message,\n          errors: body.errors,\n        });\n      }\n\n      this.setState({\n        logged_in: true,\n      });\n\n      this.props.onLogin(body); // user\n\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  onChange(attr, event) {\n    this.setState({\n      [attr]: event.target.value,\n    });\n  }\n\n  passwordsMatch() {\n      if (!this.state.confirm_password) {\n          return true;\n      }\n      return this.state.password === this.state.confirm_password;\n  }\n\n  render() {\n    const form = <form onSubmit={this.handleSubmit}>\n        <div className=\"form-row\">\n          <div className=\"col-12 mb-2\">\n            <input type=\"text\" className=\"form-control\" placeholder=\"Desired Username\" required\n              value={this.state.username} onChange={(e) => this.onChange('username', e)}/>\n          </div>\n          <div className=\"col-12 mb-2\">\n            <input type=\"text\" className=\"form-control\" placeholder=\"Your Name\" required\n              value={this.state.name} onChange={(e) => this.onChange('name', e)}/>\n          </div>\n          <div className=\"col-12 mb-2\">\n            <input type=\"email\" className=\"form-control\" placeholder=\"email@example.com\" required\n              value={this.state.email} onChange={(e) => this.onChange('email', e)}/>\n          </div>\n          <div className=\"col-12 mb-2\">\n            <input type=\"password\" className=\"form-control\" placeholder=\"Password\" required\n              value={this.state.password} onChange={(e) => this.onChange('password', e)}/>\n          </div>\n          <div className=\"col-12 mb-2\">\n            <input type=\"password\" className={`form-control ${this.passwordsMatch() ? '' : 'is-invalid'}`} placeholder=\"Confirm Password\" required\n              value={this.state.confirm_password} onChange={(e) => this.onChange('confirm_password', e)}/>\n              <span className=\"invalid-feedback\">\n                {!this.passwordsMatch() ? 'passwords must match' : ''}\n              </span>\n          </div>\n          <div className=\"col-12\">\n            <button type=\"submit\" className=\"btn btn-primary btn-block\">Sign Me Up</button>\n          </div>\n        </div>\n      </form>;\n\n    const errors = Object.keys(this.state.errors)\n      .map((attr, i) => {\n        return <li key={`${attr}-${i}`}>\n          <strong>{attr}: </strong> {this.state.errors[attr].message}\n        </li>\n      })\n\n    const message = <div className=\"text-danger mt-3\">\n      {this.state.error_msg}\n      <ul className=\"m-0\">{errors}</ul>\n    </div>\n\n    return (\n      <div className=\"row\">\n        <div className=\"col\">\n          <div className=\"card my-5 mx-auto\" style={{maxWidth: '500px'}}>\n            <div className=\"card-body\">\n              {form}\n              {this.state.error_msg ? message : null}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}